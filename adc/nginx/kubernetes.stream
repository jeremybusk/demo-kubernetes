upstream demodb {
  least_conn;
  server k1:31372;  # k1 - different master kubernetes nodes with exposed port 
  server k2:31372;  # k2
  server k3:31372;  # k3
  # fail_timeout=5s, weight=5, backup, slow_start=30s, max_fails=3 fail_timeout=30s(default is 1 attempt), 
  # https://docs.nginx.com/nginx/admin-guide/load-balancer/http-health-check/
}
server {
  listen 9001;
  proxy_pass demodb;
}
